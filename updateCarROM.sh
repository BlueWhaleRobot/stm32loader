#!/bin/bash
echo -e "\033[34m██████╗ ██╗     ██╗   ██╗███████╗██╗    ██╗██╗  ██╗ █████╗ ██╗     ███████╗
██╔══██╗██║     ██║   ██║██╔════╝██║    ██║██║  ██║██╔══██╗██║     ██╔════╝
██████╔╝██║     ██║   ██║█████╗  ██║ █╗ ██║███████║███████║██║     █████╗
██╔══██╗██║     ██║   ██║██╔══╝  ██║███╗██║██╔══██║██╔══██║██║     ██╔══╝
██████╔╝███████╗╚██████╔╝███████╗╚███╔███╔╝██║  ██║██║  ██║███████╗███████╗
╚═════╝ ╚══════╝ ╚═════╝ ╚══════╝ ╚══╝╚══╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚══════╝╚══════╝"
echo -e -n "\033[0m"
echo -e "\033[34m请\033[31m检查\033[34m底盘\033[31m上电状态\033[34m,确定给\033[31m小强底盘\033[34m更新固件吗？确定请按\033[31my\033[34m,退出请按\033[31mn\033[34m"
echo -e -n "\033[0m"
read isContinue
if [ "$isContinue" = "y" ] ;then
echo -e "\033[34m 停止运行ros任务，释放串口资源"
echo -e -n "\033[0m"
sudo service startup stop
echo -e "\033[34m 开始更新小强底盘固件..."
echo -e -n "\033[0m"
./stm32loader.py -p /dev/ttyUSB001 -e -w -v mini.bin
fi
